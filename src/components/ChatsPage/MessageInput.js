import React, { useEffect, useRef, useState } from "react";
import Picker from "emoji-picker-react";
import useRecorder from "../../hooks/useRecorder";

function MessageInput() {
  const [chosenFile, setChosenFile] = useState(null);
  const [showPicker, setShowPicker] = useState(false);
  const filePickerRef = useRef(null);

  const [audioURL, isRecording, startRecording, stopRecording, blob] =
    useRecorder();

  const inputRef = useRef(null);
  const onEmojiClick = (event, emojiObject) => {
    inputRef.current.value = inputRef.current.value + emojiObject.emoji;
  };
  const onMicrophoneClick = (event) => {
    if (!isRecording) startRecording();
    else stopRecording();
  };

  useEffect(() => {
    console.log({ audioURL, blob });
  }, [blob, audioURL]);

  const FileAttachIcon = ({ onClick }) => {
    return (
      <svg
        width="139"
        height="151"
        viewBox="0 0 139 151"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        onClick={onClick}
      >
        <g clipPath="url(#clip0_8_2532)">
          <path
            d="M55.2688 82.0518C68.181 69.2298 82.203 57.0536 94.3333 46.645C99.8481 41.8887 104.899 36.6207 109.419 30.9112C109.827 30.4016 110.358 29.7219 110.851 28.9917C111.366 28.3446 111.628 27.5331 111.59 26.7073C111.552 25.8814 111.216 25.0975 110.643 24.5008C110.138 23.9127 109.437 23.5275 108.669 23.4161C107.902 23.3047 107.12 23.4748 106.468 23.8949C105.163 24.5968 103.923 25.4139 102.764 26.3362C99.0273 29.3855 95.3527 32.4921 92.2516 35.1293C75.4137 49.4109 59.3458 64.5755 44.1151 80.5593C41.5166 83.293 39.1549 86.3188 36.8708 89.2431C35.8449 90.5572 34.7837 91.9156 33.7181 93.2264C30.5363 97.1387 29.2461 101.913 29.7733 107.824C30.2941 113.66 33.2372 118.958 37.6441 121.996C41.7157 124.804 46.7402 125.48 52.1743 123.949C56.5759 122.766 60.6985 120.721 64.3026 117.931C65.3589 117.094 66.4202 116.259 67.4858 115.427C72.4981 111.496 77.6867 107.433 82.2466 102.865C94.0938 91.0057 105.908 78.718 117.332 66.8405C120.457 63.5915 123.583 60.3443 126.71 57.0991C130.194 53.5298 133.042 49.3902 135.13 44.8597C138.859 36.6452 139.638 28.965 137.512 21.3799C135.29 13.4498 130.007 6.65283 123.379 3.19804C117.065 -0.0953215 109.62 -0.39858 101.857 2.31486C95.1782 4.69165 88.8836 8.03481 83.1749 12.2378C70.79 21.1826 61.2934 29.0542 53.2874 37.0097C40.3193 49.8968 27.2164 63.0825 14.5458 75.8328L12.0015 78.3933C7.19815 83.2266 4.36334 88.1972 3.33355 93.5902C2.75551 96.62 2.34792 99.7259 1.95475 102.729C1.77704 104.083 1.6001 105.437 1.40742 106.787C1.38673 106.932 1.41431 107.081 1.48593 107.208C1.55755 107.336 1.66917 107.438 1.80377 107.496C1.80377 107.675 1.79843 107.855 1.79583 108.035C1.78216 108.887 1.76839 109.769 1.82697 110.646C1.87319 111.343 1.98776 112.03 2.09777 112.694C2.16873 113.123 2.24053 113.552 2.29325 113.984C4.00263 128.001 11.5639 139.035 24.7677 146.781C29.0731 149.281 33.9747 150.569 38.953 150.509C40.1537 150.507 41.3536 150.442 42.5475 150.314C50.1766 149.515 56.9641 146.464 62.5967 143.585C72.599 138.537 81.9589 132.307 90.4765 125.029C99.3697 117.343 108.19 109.278 116.719 101.483C118.896 99.4929 121.074 97.5045 123.253 95.5168C126.55 92.5137 129.646 89.3896 133.062 85.9094C134.145 84.8361 135.034 83.5832 135.687 82.2054C136.79 79.7562 136.533 77.5003 134.961 75.8536C133.123 73.9251 130.843 73.4324 128.708 74.5044C126.845 75.3479 125.103 76.4387 123.529 77.7463C114.881 85.5833 106.379 93.4744 99.2024 100.16C90.9445 107.852 82.7921 115.293 73.8625 121.769C66.124 127.38 57.6156 133.107 47.8332 136.981C38.1602 140.811 29.8378 138.957 22.3943 131.318C16.5599 125.33 13.427 118.587 12.8177 110.715C11.9064 98.898 14.2737 91.1736 20.7447 84.8863C28.5866 77.2673 36.4268 69.3892 44.009 61.7704C48.7075 57.0497 53.5653 52.1676 58.3738 47.3974C66.3551 39.4803 75.4091 31.8385 86.8677 23.3487C91.6924 19.7735 98.2136 15.3483 105.875 12.8418C110.152 11.4438 113.448 11.3215 116.565 12.4436C123.326 14.8798 128.808 24.2202 127.847 31.6621C127.027 38.0159 124.273 43.6824 119.428 48.9863C116.447 52.2503 113.363 55.4506 110.475 58.4238C107.481 61.5071 104.491 64.5962 101.506 67.6911C93.338 76.1458 84.892 84.8895 76.4031 93.3C71.7306 97.9302 66.5563 102.233 61.5532 106.395C60.5686 107.213 59.5847 108.034 58.6017 108.854C55.6834 111.32 52.2855 113.153 48.6228 114.238C44.9371 115.322 42.2209 114.312 40.5473 111.237C38.3679 107.23 38.297 103.605 40.3299 100.157C44.4152 93.2238 49.9226 87.3582 55.2688 82.0518Z"
            fill="black"
          />
        </g>
        <defs>
          <clipPath id="clip0_8_2532">
            <rect
              width="138"
              height="151"
              fill="white"
              transform="translate(0.777344)"
            />
          </clipPath>
        </defs>
      </svg>
    );
  };

  const MicrophoneIcon = ({ onClick }) => {
    return (
      <svg
        width="114"
        height="174"
        viewBox="0 0 114 174"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        onClick={onClick}
      >
        <g clipPath="url(#clip0_8_2502)">
          <path
            d="M90.8677 24.8682C88.8544 19.5039 86.0444 13.3777 80.4437 8.60271C72.0265 1.42664 61.6838 -1.00283 48.8271 1.17508C34.1631 3.66024 23.9054 12.8009 19.1639 27.609C15.3207 39.5272 13.9219 52.0931 15.0505 64.5603C15.496 69.4905 15.8674 74.5139 16.2265 79.373C16.6461 85.0393 17.0794 90.8997 17.634 96.6546C18.1171 101.406 18.9475 106.116 20.1186 110.747C22.0273 118.431 26.7648 123.844 34.2001 126.834C41.8216 129.99 49.9848 131.646 58.2386 131.711C62.5855 131.711 66.9181 131.217 71.1524 130.237C83.0116 127.499 90.4527 120.705 93.2699 110.045C94.3603 106.168 95.0564 102.192 95.348 98.1766C95.7611 91.1539 95.9799 84.0108 96.1923 77.0961C96.2787 74.2804 96.3696 71.4647 96.4637 68.6497C96.4696 68.5015 96.4248 68.3553 96.3371 68.2357C96.2501 68.1154 96.1241 68.028 95.9812 67.9873C95.9812 67.1884 95.9773 66.389 95.9695 65.5895C95.9565 63.4277 95.9436 61.1909 95.9936 58.9994C96.2904 46.016 94.6142 34.8521 90.8677 24.8682ZM84.2981 66.5455L84.2935 71.8586C84.2935 71.9919 84.3338 72.1219 84.4091 72.2319C84.4844 72.3425 84.591 72.4272 84.7156 72.4764C84.5656 74.9952 84.4234 77.5146 84.2896 80.034C83.9188 86.7896 83.5363 93.7749 82.9258 100.619C82.6362 103.869 81.5672 107.143 80.5333 110.309L80.2963 111.037C79.3722 113.883 77.2992 116.052 73.9586 117.679C68.417 120.379 62.0949 121.422 55.1668 120.784C49.948 120.3 44.6461 118.973 39.6663 117.653C34.7774 116.359 31.5212 112.852 30.2496 107.514C29.4306 104.343 28.8744 101.11 28.5865 97.848C27.5234 82.3944 26.4245 65.8023 25.5907 49.1824C25.3334 44.6985 25.6087 40.1999 26.4109 35.7804C29.0157 22.0486 39.5942 12.2495 52.7347 11.3944C53.6153 11.3375 54.5083 11.3092 55.4071 11.3092C58.1208 11.3101 60.8285 11.5617 63.4957 12.0608C71.0102 13.4761 76.1309 17.8674 78.3026 24.7582C80.5366 31.834 82.3186 39.2022 83.9526 46.1415C84.2838 47.9206 84.3981 49.7328 84.2935 51.5392C84.2844 52.1214 84.2747 52.6985 84.2786 53.2723C84.3084 57.6954 84.3033 62.1948 84.2981 66.5455Z"
            fill="black"
          />
          <path
            d="M20.043 136.726C26.0404 141.572 33.0165 144.083 39.6621 146.074C42.8917 147.045 46.2369 147.766 49.4723 148.468C50.7627 148.747 52.0512 149.027 53.3344 149.321V163.377L53.1338 163.41C52.7882 163.476 52.4391 163.522 52.0882 163.549L51.6135 163.573C44.134 163.948 36.4007 164.337 28.7933 164.689C26.7853 164.782 24.6597 165.227 24.1265 167.824C23.6492 170.153 24.9117 172.065 27.4217 172.81C29.053 173.274 30.7426 173.503 32.4392 173.491H32.5191C36.5669 173.474 40.6804 173.421 44.6588 173.369C49.6386 173.304 54.7898 173.24 59.8475 173.244C65.404 173.249 71.0557 173.339 76.5219 173.425C79.9639 173.479 83.4013 173.533 86.8413 173.569C86.9582 173.569 87.077 173.569 87.1978 173.569C88.3603 173.598 89.5208 173.472 90.6489 173.194C91.6685 172.906 92.5595 172.281 93.1764 171.422C93.7927 170.564 94.098 169.522 94.0421 168.467C93.8018 166.221 92.6082 164.706 90.6807 164.199C89.3396 163.866 87.9635 163.696 86.5809 163.693C82.4161 163.641 78.2513 163.617 74.0866 163.593C71.359 163.577 68.6333 163.558 65.909 163.536C65.2936 163.531 64.6754 163.472 63.9538 163.407L63.3765 163.353L62.7849 149.692L65.4332 149.421C67.5469 149.206 69.4685 149.011 71.3902 148.801C84.7352 147.345 95.6403 140.742 103.802 129.177C109.878 120.567 112.825 110.382 113.349 96.1538C113.327 94.5406 113.072 92.939 112.591 91.3982C111.898 88.7171 110.352 87.2319 108.239 87.2157C107.196 87.1659 106.166 87.4622 105.31 88.0586C104.454 88.6543 103.82 89.5172 103.509 90.5101C102.683 92.9273 102.035 95.4015 101.57 97.9119C101.222 99.8369 100.981 101.816 100.748 103.733C100.325 107.215 99.8876 110.816 98.7933 114.105C94.5344 126.912 86.1607 134.791 73.906 137.521C62.1562 140.136 50.2867 139.167 37.6157 134.557C19.6377 128.014 8.78906 111.457 9.97881 92.3762L10.0061 91.9442C10.1988 90.0573 10.175 88.1543 9.9353 86.2727C9.75346 85.6135 9.42953 85.0016 8.98597 84.4796C8.54235 83.9576 7.98975 83.5385 7.36682 83.2506C5.83353 82.5993 4.22682 83.3574 3.27541 85.1873C2.98986 85.7274 2.7764 86.3031 2.64034 86.8982C1.41292 92.5438 0.144564 98.3815 1.42393 104.557C4.30153 118.402 10.3892 128.927 20.043 136.726Z"
            fill="black"
          />
        </g>
        <defs>
          <clipPath id="clip0_8_2502">
            <rect
              width="113"
              height="174"
              fill="white"
              transform="translate(0.777344)"
            />
          </clipPath>
        </defs>
      </svg>
    );
  };

  const SendIcon = ({ onClick }) => {
    return (
      <svg
        width="158"
        height="134"
        viewBox="0 0 158 134"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        onClick={onClick}
      >
        <g clipPath="url(#clip0_8_2609)">
          <path
            d="M6.72129 53.8326C5.22886 54.369 3.79008 55.0461 2.42414 55.8549C1.99492 56.0692 1.62306 56.3841 1.33985 56.7732C1.05664 57.1622 0.870351 57.614 0.796627 58.0907C0.728141 58.9623 1.18429 59.8347 2.14826 60.6823C2.95005 61.3417 3.81412 61.9203 4.72808 62.4099C5.42909 62.8132 6.14303 63.1944 6.85696 63.575C7.87906 64.1201 8.93607 64.6808 9.92071 65.3035C23.2735 73.7162 35.4245 81.1753 48.7508 87.2021C48.7223 87.6822 48.6907 88.1609 48.6584 88.6377C48.5679 89.9855 48.4749 91.3782 48.4729 92.7533C48.4699 94.8297 48.4618 96.9073 48.4484 98.9863C48.4141 105.578 48.3786 112.395 48.5989 119.098C48.6784 121.515 49.5403 123.243 51.0256 123.964C52.5872 124.719 54.5946 124.279 56.6783 122.719C57.4297 122.156 58.1998 121.524 59.032 120.785C62.6824 117.545 66.3277 114.298 70.0078 111.02L73.343 108.049C73.3682 108.068 73.3927 108.087 73.4153 108.107L76.4991 110.778C80.01 113.816 83.6397 116.957 87.1829 120.08C88.1921 120.967 89.2071 121.85 90.2279 122.727C93.3395 125.417 96.5596 128.198 99.4515 131.179C100.984 132.756 102.474 133.498 104.264 133.498C105.036 133.487 105.803 133.372 106.546 133.158C109.158 132.442 110.843 130.835 112.011 127.954C116.411 117.096 120.915 106.068 125.269 95.4041C128.844 86.644 132.416 77.8832 135.985 69.1212C143.674 50.3116 150.308 31.082 155.854 11.5231C156.526 9.25442 156.998 6.93056 157.266 4.57852C157.355 4.03355 157.322 3.47531 157.169 2.945C157.015 2.41468 156.745 1.92589 156.379 1.51476C155.937 1.11363 155.412 0.817045 154.841 0.646857C154.272 0.476668 153.671 0.437215 153.083 0.531243C152.306 0.62523 151.539 0.799482 150.796 1.05151L150.696 1.08216C149.028 1.58303 147.355 2.06949 145.682 2.5567C141.796 3.6879 137.778 4.85757 133.878 6.19107C105.715 15.8287 77.1517 26.3209 48.9821 37.3766C40.8575 40.564 32.5849 43.7787 24.5844 46.8861C18.6266 49.1966 12.6722 51.5121 6.72129 53.8326ZM60.3339 83.5438C61.8845 82.2395 63.3543 81.0069 64.863 79.8484C70.7773 75.3015 76.6975 70.7617 82.6228 66.2304C94.2653 57.3147 106.305 48.0953 118.081 38.9404C121.682 36.1433 125.099 32.9988 128.404 29.9637C129.539 28.9229 130.673 27.8776 131.816 26.8465C132.728 26.0243 134.254 24.6486 133.408 21.9607C133.38 21.8729 133.335 21.7918 133.275 21.7225C133.215 21.6532 133.141 21.5973 133.059 21.5582C132.976 21.5193 132.886 21.4978 132.794 21.4951C132.703 21.4924 132.612 21.5085 132.527 21.5424C132.174 21.6862 131.833 21.8131 131.504 21.9328C130.819 22.1684 130.152 22.4534 129.508 22.7856C107.655 34.7331 88.645 50.3999 70.2617 65.552C66.1042 68.9781 62.1856 72.5122 58.0409 76.2499C56.2809 77.8377 54.5032 79.432 52.7074 81.0335L11.7046 58.6697C11.9409 58.5229 12.189 58.3963 12.4463 58.2911C19.0407 55.791 25.6326 53.2819 32.2218 50.7636C48.3566 44.61 65.0432 38.2463 81.5231 32.1929C96.1997 26.8017 111.219 21.5788 125.743 16.5278C130.572 14.8487 135.401 13.1663 140.228 11.4807C142.099 10.8263 143.986 10.3144 145.986 9.77318C146.515 9.63008 147.047 9.48508 147.581 9.33807C139.534 35.016 129.269 60.2022 119.336 84.5728C114.116 97.3783 108.723 110.61 103.68 123.835C89.9733 112.724 76.6781 100.978 63.8163 89.6134C62.0792 88.077 60.3384 86.5399 58.5939 85.0022C59.187 84.5045 59.7653 84.0193 60.3319 83.5438H60.3339ZM67.952 103.131L56.1931 113.163L55.2608 91.3281L67.952 103.131Z"
            fill="black"
          />
        </g>
        <defs>
          <clipPath id="clip0_8_2609">
            <rect
              width="157"
              height="134"
              fill="white"
              transform="translate(0.777344)"
            />
          </clipPath>
        </defs>
      </svg>
    );
  };
  const EmojiPicker = ({ onClick }) => {
    return (
      <svg
        width="159"
        height="155"
        viewBox="0 0 159 155"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        onClick={onClick}
      >
        <path
          d="M81.0221 108.396C73.0067 108.224 66.8554 107.053 60.9927 104.481C56.6112 102.604 52.9025 99.4421 50.3568 95.4125C49.4088 93.9227 48.6551 92.1526 50.1882 90.8024C51.8871 89.3066 53.5739 90.2946 54.8822 91.7505C62.7371 100.508 72.9491 102.503 83.8573 100.888C93.0414 99.5281 99.9903 94.3202 104.002 85.6649C104.476 84.6492 104.788 83.3369 105.6 82.7532C106.751 81.927 108.478 81.0034 109.627 81.3217C110.804 81.6474 112.365 83.4208 112.364 84.5578C112.396 86.7814 111.814 88.9708 110.68 90.8844C103.327 102.107 92.9161 108.099 81.0221 108.396Z"
          fill="black"
        />
        <path
          d="M101.13 53.3956C101.607 50.8278 101.853 48.9427 102.325 47.1158C102.9 44.8906 104.273 43.2729 106.672 42.9851C109.11 42.6959 111.043 43.7856 112.473 45.7114C115.047 49.1804 114.766 58.0815 112.02 61.3927C109.549 64.3722 105.037 64.2442 103.297 60.7928C102.079 58.3781 101.724 55.5259 101.13 53.3956Z"
          fill="black"
        />
        <path
          d="M54.8842 53.5195C54.2071 56.0967 53.9363 58.2703 53.0729 60.1799C51.4565 63.7687 47.4214 64.192 45.2491 60.9478C42.3624 56.6364 42.1478 51.7195 43.8271 47.0052C45.1638 43.2525 50.0927 42.891 52.2149 46.3384C53.578 48.5533 54.0899 51.293 54.8842 53.5195Z"
          fill="black"
        />
        <path
          d="M2.82302 55.9748C-4.18681 83.5259 1.95147 107.831 21.0802 128.223C21.5779 128.75 22.0858 129.277 22.5929 129.785C32.8687 140.06 45.6674 146.404 55.8084 150.819C60.1611 152.719 82.4948 155.028 88.5376 154.128C124.449 148.765 148.081 128.511 156.312 94.625C157.883 87.9872 158.666 81.1873 158.644 74.3661C158.682 58.2974 151.917 39.6163 137.964 25.6251C136.527 24.4373 135.096 23.2069 133.711 22.0145C130.71 19.4339 127.607 16.762 124.361 14.4834C99.563 -2.97008 73.7975 -3.06774 47.7835 6.1875C24.231 14.5618 9.10491 31.3158 2.82302 55.9748ZM47.8845 14.4373C70.7091 4.95246 93.6108 3.27855 115.948 17.4844C120.032 20.0847 130.92 28.8849 132.635 30.2067L132.745 30.2879L132.835 30.3889C141.55 39.6299 151.529 56.5268 151.308 73.8963C151.236 81.3232 150.23 88.7115 148.315 95.8878C142.642 116.511 129.077 131.541 106.846 141.821C84.2452 152.642 51.8342 141.702 43.2107 136.01C33.6794 129.493 25.3397 121.386 18.5559 112.043C7.91652 96.9802 5.52887 75.3276 11.246 55.5339C13.9218 46.3948 18.5977 37.9656 24.9347 30.8574C31.2717 23.7493 39.1111 18.1403 47.8845 14.4373Z"
          fill="black"
        />
      </svg>
    );
  };

  const handleFileClick = (e) => {
    filePickerRef.current.click();
  };

  const onFileChosen = (e) => {
    const file = e.target.files[0];
    if (file) setChosenFile(file);
  };

  const handleMessageSend = (e) => {
    const userMessage = inputRef.current.value;
    console.log(userMessage);
  };

  const StopIcon = () => {
    return (
      <svg
        width="130"
        height="127"
        viewBox="0 0 130 127"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g clip-path="url(#clip0_13_3236)">
          <path
            d="M62.3649 76.0626C51.1451 86.1072 40.1732 95.8365 29.311 105.687C23.0183 111.394 16.9509 117.348 10.6729 123.069C9.0008 124.632 7.07937 125.903 4.98785 126.828C3.95649 127.261 1.72933 126.828 1.22143 126.035C0.549397 124.982 0.748089 123.114 1.11261 121.74C1.37779 120.738 2.45753 119.908 3.27208 119.104C18.7627 103.852 34.2604 88.6091 49.7649 73.3765C51.5045 71.6681 53.2942 70.0117 55.293 68.1144C48.5175 60.6052 41.7314 53.3593 35.2529 45.844C24.9134 33.8442 14.7813 21.6659 4.56355 9.56215C4.19212 9.12226 3.87261 8.64079 3.49773 8.20091C1.70969 6.08722 0.449103 3.80904 2.48505 1.24507C4.00964 -0.674661 7.65428 -0.387934 10.1921 2.22366C16.5124 8.7258 22.6693 15.3855 28.7745 22.0963C39.9226 34.3429 50.9837 46.6692 62.092 58.9522C62.5675 59.399 63.0731 59.8124 63.6053 60.1895C72.1948 51.9798 80.6892 43.7969 89.2545 35.6841C99.1881 26.2803 109.157 16.9135 119.16 7.58361C122.912 4.07666 125.921 3.44455 128.224 5.49071C130.61 7.61046 130.388 11.1519 126.582 14.9489C116.293 25.2161 105.755 35.2339 95.2268 45.2629C87.2065 52.9054 79.0583 60.4164 70.5224 68.3992C77.4586 75.5733 84.0927 82.724 91.0479 89.5439C97.7284 96.0945 104.782 102.265 111.594 108.681C114.257 111.095 116.751 113.69 119.058 116.449C120.918 118.763 121.193 121.636 118.906 123.919C116.652 126.17 114.043 125.375 111.869 123.67C107.71 120.58 103.724 117.264 99.9275 113.736C88.3069 102.355 76.8913 90.7657 65.4012 79.2517C64.4925 78.3424 63.6243 77.3883 62.3649 76.0626Z"
            fill="black"
          />
        </g>
        <defs>
          <clipPath id="clip0_13_3236">
            <rect
              width="129"
              height="127"
              fill="white"
              transform="translate(0.777344)"
            />
          </clipPath>
        </defs>
      </svg>
    );
  };
  const PlayIcon = () => {
    return (
      <svg
        width="105"
        height="122"
        viewBox="0 0 105 122"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g clip-path="url(#clip0_8_2568)">
          <path
            d="M100.079 47.7886C99.5644 47.3264 99.0229 46.8946 98.4574 46.4953C96.7837 45.3084 95.1008 44.0631 93.4732 42.8612C89.8059 40.0503 85.9982 37.4267 82.0644 35.0007C65.0248 24.8922 45.7854 15.6235 23.246 6.66619C19.775 5.28656 16.2527 3.96594 12.521 2.56813C10.7186 1.89259 8.85634 1.19371 6.90699 0.45457C6.7572 0.397786 6.59196 0.396647 6.44139 0.451322C6.29081 0.505997 6.16488 0.612835 6.08663 0.752424C5.89163 1.09896 5.65768 1.45001 5.43148 1.7907C4.84191 2.55035 4.41708 3.42416 4.18408 4.35658C3.5241 7.87087 3.09232 11.4241 2.8913 14.994C2.7912 17.3968 2.68959 19.7994 2.58645 22.2017C2.04695 34.8761 1.4886 47.9813 1.28645 60.8782C1.09145 73.2265 1.14085 85.7814 1.1883 97.923C1.2078 102.875 1.22205 107.827 1.23115 112.779V112.953C1.19337 114.265 1.27166 115.577 1.46514 116.875C1.58305 117.743 1.8996 118.572 2.39015 119.298C2.88071 120.024 3.53214 120.628 4.29398 121.062C5.04979 121.462 5.89311 121.668 6.74838 121.662C7.66456 121.653 8.56884 121.454 9.40422 121.078C10.2631 120.671 11.0815 120.185 11.8482 119.624C12.1895 119.39 12.5308 119.157 12.8785 118.939C14.9741 117.623 17.0676 116.303 19.1588 114.98C23.7439 112.087 28.4844 109.096 33.1774 106.207C39.8485 102.1 46.5271 98.0048 53.213 93.9223C61.5375 88.8288 70.146 83.5614 78.5902 78.3433C86.5046 73.4523 93.6051 67.3432 100.199 61.5058C102.894 59.121 104.153 56.984 104.164 54.779C104.174 52.5285 102.875 50.3084 100.079 47.7886ZM11.0748 10.4948L11.2405 10.5598C11.8316 10.7604 12.3947 11.0353 12.9162 11.3781C19.7308 16.4203 26.9751 20.556 35.7553 25.214C48.6903 32.0778 59.5069 37.8904 70.2559 43.9515C74.0688 46.1014 77.7666 48.6329 81.3429 51.0813C82.6429 51.973 83.9494 52.8652 85.2605 53.742C86.1256 54.3488 86.9563 55.0033 87.7486 55.7024C88.0977 55.997 88.4702 56.3111 88.8777 56.6485C85.9703 59.9252 82.6884 62.8505 79.0991 65.3646C73.1841 69.4789 67.3777 73.4763 61.3913 77.1266C48.5629 84.9521 35.4471 92.7932 22.763 100.377L12.8941 106.282C12.4265 106.532 11.9319 106.728 11.4199 106.866L11.3549 106.885C10.3468 96.642 10.1258 24.5106 11.0748 10.4948Z"
            fill="black"
          />
        </g>
        <defs>
          <clipPath id="clip0_8_2568">
            <rect
              width="104"
              height="122"
              fill="white"
              transform="translate(0.777344)"
            />
          </clipPath>
        </defs>
      </svg>
    );
  };
  return (
    <>
      <FileAttachIcon onClick={handleFileClick} />
      <input
        type="file"
        className="filePicker"
        ref={filePickerRef}
        onChange={onFileChosen}
        style={{ display: "none" }}
      />
      <textarea
        className={`messageInput ${isRecording && "d-none"}`}
        placeholder="Write your message"
        ref={inputRef}
      />

      <div className={`audioContainer ${!isRecording && "d-none"}`}>
        Recording...
      </div>
      {!isRecording && <SendIcon onClick={handleMessageSend} />}
      {isRecording && (
        <>
          <PlayIcon /> <StopIcon />{" "}
        </>
      )}
      <MicrophoneIcon onClick={onMicrophoneClick} />

      {!isRecording && (
        <div>
          {showPicker && <Picker onEmojiClick={onEmojiClick} />}
          <EmojiPicker onClick={() => setShowPicker(!showPicker)} />
        </div>
      )}
    </>
  );
}

export default MessageInput;
